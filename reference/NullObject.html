<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Null Object Pattern — NullObject • Design Patterns in R</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Null Object Pattern — NullObject" />
<meta property="og:description" content="Model a domain concept using natural lingo of the domain
experts, such as “Passenger”, “Address”, and “Money”." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Design Patterns in R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tidylab/R6P/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Null Object Pattern</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidylab/R6P/blob/master/R/base-NullObject.R'><code>R/base-NullObject.R</code></a></small>
    <div class="hidden name"><code>NullObject.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Model a domain concept using natural lingo of the domain
experts, such as “Passenger”, “Address”, and “Money”.</p>
    </div>

    <pre class="usage"><span class='fu'>NullObject</span><span class='op'>(</span><span class='op'>)</span></pre>


    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><div class="alert alert-danger"></p>

<p><strong>Caution:</strong> NullObject is designed for demonstration purposes. Instead
of directly using the design pattern as it appears in the package, you’d
have to adjust the source code to the problem you are trying to solve.
</div>


<!-- One line about what the function does --></p>

<p><em><strong>Null Object</strong></em> provides special behaviour for particular cases.
<div class="alert alert-warning"></p>

<p><strong>Note:</strong> The Null Object is not the same as the reserved word in R
<code>NULL</code> (all caps).
</div></p>
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>How It Works</h3>


<p>When a function fails in R, some functions produce a run-time error
while others return <code>NULL</code> (and potentially prompt a warning). What the
function evokes in case of a failure is subjected to its programmer
discretion. Usually, the programmer follows either a punitive or
forgiving policy regarding how run-time errors should be handled.</p>
<p>In other occasions, <code>NULL</code> is often the result of unavailable data. This
could happened when querying a data source matches no entries, or when
the system is waiting for user input (mainly in Shiny).</p>
<p>If it is possible for a function to return <code>NULL</code> rather than an error,
then it is important to surround it with null test code, e.g.
<code>if(is.null(...)) do_the_right_thing()</code>. This way the software would do
the right thing if a null is present.</p>
<p>Often the right thing is the same in many contexts, so you end up
writing similar code in lots of places—committing the sin of code
duplication.</p>
<p>Instead of returning <code>NULL</code>, or some odd value such as <code>NaN</code> or
<code><a href='https://rdrr.io/r/base/logical.html'>logical(0)</a></code>, return a <strong>Null Object</strong> that has the same interface as
what the caller expects. In R, this often means returning a <code>data.frame</code>
structure, i.e. column names and variables types, with no rows.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>When to Use It</h3>

<ul>
<li><p>In situations when a subroutine is likely to fail, such as loss of
Internet or database connectivity. Instead of prompting a run-time
error, you could return the <strong>Null Object</strong> as part of a <a href='https://en.wikipedia.org/wiki/Graceful_exit'>gracefully failing</a> strategy. A
common strategy employs <code>tryCatch</code> that returns the <strong>Null Object</strong>
in the case of an error:</p></li>
</ul><p><!-- end list -->

<div class="r"></p><pre><span class='co'># Simulate a database that is 5% likely to fail </span>
<span class='va'>read_mtcars</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='fl'>0.05</span><span class='op'>)</span> <span class='kw'><a href='https://rdrr.io/r/base/stop.html'>stop</a></span><span class='op'>(</span><span class='op'>)</span> <span class='kw'>else</span> <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>

<span class='co'># mtcars null object constructor</span>
<span class='va'>NullCar</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>0</span>,<span class='op'>]</span>

<span class='co'># How does the null car object look like? </span>
<span class='fu'>NullCar</span><span class='op'>(</span><span class='op'>)</span>
<span class='co'>#&gt;  [1] mpg  cyl  disp hp   drat wt   qsec vs   am   gear carb</span>
<span class='co'>#&gt; &lt;0 rows&gt; (or 0-length row.names)</span>

<span class='co'># Subroutine with gracefully failing strategy</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1814</span><span class='op'>)</span>
<span class='va'>cars</span> <span class='op'>&lt;-</span> <span class='kw'><a href='https://rdrr.io/r/base/conditions.html'>tryCatch</a></span><span class='op'>(</span>
  <span class='co'># Try reading the mtcars dataset</span>
  <span class='fu'>read_mtcars</span><span class='op'>(</span><span class='op'>)</span>, 
  <span class='co'># If there is an error, return the Null Car object</span>
  error <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>e</span><span class='op'>)</span> <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='fu'>NullCar</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> 
<span class='op'>)</span>

<span class='co'># Notice: Whether the subroutine fails or succeeds, it returns a tibble with </span>
<span class='co'># the same structure.</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>cars</span><span class='op'>)</span>
<span class='co'>#&gt;  [1] "mpg"  "cyl"  "disp" "hp"   "drat" "wt"   "qsec" "vs"   "am"   "gear"</span>
<span class='co'>#&gt; [11] "carb"</span>
</pre><p></div></p><ul>
<li><p>In Shiny dashboards</p></li>
</ul><p><!-- end list -->

<div class="r"></p><pre><span class='va'>geom_null</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_blank.html'>geom_blank</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/exists.html'>exists</a></span><span class='op'>(</span><span class='st'>"user_input"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>user_input</span>, <span class='fu'>ggplot</span><span class='fu'>::</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>mpg</span>, y <span class='op'>=</span> <span class='va'>hp</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
  <span class='fu'>geom_null</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>geom_text</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>, label <span class='op'>=</span> <span class='st'>"choose an entry from the list"</span><span class='op'>)</span>
<span class='op'>}</span>
</pre><p></div></p><ul>
<li><p>In unit-tests</p></li>
</ul><p><!-- end list -->

<div class="r"></p><pre><span class='va'>classes</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>class</span><span class='op'>)</span>
    
<span class='fu'>test_that</span><span class='op'>(</span><span class='st'>"mtcars follows a certain table structure"</span>, <span class='op'>{</span>
    <span class='co'># Compare column names</span>
    <span class='fu'>expect_identical</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='fu'>NullCar</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
    <span class='co'># Compare variable types</span>
    <span class='fu'>expect_identical</span><span class='op'>(</span><span class='fu'>classes</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>, <span class='fu'>classes</span><span class='op'>(</span><span class='fu'>NullCar</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
</pre><p></div></p>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other base design patterns: 
<code><a href='Singleton.html'>Singleton</a></code>,
<code><a href='ValueObject.html'>ValueObject</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># See more examples at &lt;https://tidylab.github.io/R6P/articles&gt;</span>

<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='fu'>NullObject</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "given"  "family"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>NullObject</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/harell'>Harel Lustiger</a>, <a href='https://github.com/tidylab'><img src='https://github.com/tidylab/tidylab/blob/master/favicon/apple-touch-icon-120x120.png?raw=true' height=24></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'd5f049d51d6123dd767e5f8bc7882c35',
    indexName: 'tidylab-r6p',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


